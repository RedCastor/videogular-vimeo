!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";angular.module("videogular.plugins.vimeo",[]).directive("vgVimeo",["VG_STATES",function(e){return{restrict:"A",require:"^videogular",link:function(t,n,r,i){function o(e){var t=/^.+vimeo.com\/(.*\/)?([^#\?]*)/,n=e.match(t);return n?n[2]||n[1]:null}function a(){var e=new CustomEvent("loadedmetadata");i.mediaElement[0].dispatchEvent(e)}function u(){if(Object.defineProperty(i.mediaElement[0],"currentTime",{get:function(){return f},set:function(e){f=e,m.setCurrentTime(f)},enumerable:!0,configurable:!0}),Object.defineProperty(i.mediaElement[0],"duration",{get:function(){return p},enumerable:!0,configurable:!0}),Object.defineProperty(i.mediaElement[0],"paused",{get:function(){return v},enumerable:!0,configurable:!0}),Object.defineProperty(i.mediaElement[0],"videoWidth",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(i.mediaElement[0],"videoHeight",{get:function(){return s},enumerable:!0,configurable:!0}),Object.defineProperty(i.mediaElement[0],"volume",{get:function(){return g},set:function(e){g=e,m.setVolume(g)},enumerable:!0,configurable:!0}),i.mediaElement[0].play=function(){m.play()},i.mediaElement[0].pause=function(){m.pause()},m.getVolume().then(function(e){g=e,i.onVolumeChange()}),m.getCurrentTime().then(function(e){f=e,a()}),m.getDuration().then(function(e){p=e,a()}),b(),i.currentState!==e.PLAY){var t=new CustomEvent("canplay");i.mediaElement[0].dispatchEvent(t)}else m.play().then(function(){})}function l(e){if(m)var n=m.element;else{var n=document.createElement("iframe");angular.element(i.mediaElement[0]).replaceWith(angular.element(n))}return n.src="//player.vimeo.com/video/"+e+"?player_id=vimeoplayer",n.frameBorder=0,n.scrolling="no",n.style.width="100%",n.style.height="100%",t.$eval(E)&&(n.setAttribute("webkitallowfullscreen",""),n.setAttribute("mozallowfullscreen",""),n.setAttribute("allowfullscreen","")),angular.element(n.parentNode.parentNode).find("vg-overlay-play").css("height","calc(100% - 50px)"),new Vimeo.Player(n)}function c(e){if(!e)return void(m&&m.destroy());var t=o(e);t&&(m=l(t),m.ready().then(function(){u()}),m.on("play",h),m.on("pause",y),m.on("ended",w),m.on("timeupdate",x),m.on("progress",P))}var m,d,s,f=0,p=0,v=!0,g=0,E=angular.isDefined(r.vgVimeoFullscreen)?r.vgVimeoFullscreen:"true",b=function(){i.onUpdateTime({target:i.mediaElement[0]})},h=function(){v=!1;var t=new CustomEvent("playing");i.mediaElement[0].dispatchEvent(t),i.setState(e.PLAY)},y=function(){v=!0;var t=new CustomEvent("pause");i.mediaElement[0].dispatchEvent(t),i.setState(e.PAUSE)},w=function(){i.onComplete()},x=function(e){f=e.seconds,p=e.duration,b()},P=function(e){var t=new CustomEvent("waiting");i.mediaElement[0].dispatchEvent(t)};t.$watch(function(){return i.sources},function(e,t){c(e&&e.length>0&&e[0].src?e[0].src.toString():null)})}}}])}])}]);